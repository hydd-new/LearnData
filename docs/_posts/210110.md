### 集合（set）

#### 题面
- 你有一个多重集合 $S$，初始时包含一个正整数 $m$。
- 你可以进行两个操作：
    1. 选择 $S$ 中的两个正整数 $a,b$，将它们从 $S$ 中删除，并加入 $a,b$。
    2. 选择 $S$ 中的一个正整数 $c$，满足 $c=a^b$($a,b$ 为 $\geq 2$ 的正整数)，将 $c$ 从 $S$ 中删除，并加入 $a,b$。
- 我们称 $m$ 是修的当且仅当存在一种操作序列使得所有大于 $1$ 的正整数都在集合中出现过。你需要求出 $[1,n]$ 中所有修的正整数之和，对 $2^{64}$ 取模。
- $1\leq n\leq 10^{14}$。

#### 题解
- 考场上以为这题无解。。。当时认为拼不出来新的质数，也达不到无穷多的数。
- 可以发现除了初始 $m=1$，其它情况集合里都只会有 $\geq 2$ 的正整数。初始 $m=1$ 无解。
- $\{a,b,c\}\Leftrightarrow \{b,c^a\}\Leftrightarrow \{c^{ab}\}\Leftrightarrow \{ab,c\}$。至少有两个数时，可以任意拆开乘积项。至少有三个数时，可以任意把两项乘起来。
- $\{a,b,c\}\Leftrightarrow \{a^b,c\}\Leftrightarrow \{b\text{个}a,c\}\Leftrightarrow \{a^a,(b-2)\text{个}a,c\}\Leftrightarrow \{(a+b-2)\text{个}a,c\}\Leftrightarrow \{a^a,(a-2+b-2)\text{个}a,c\}\Leftrightarrow \{(a+k(a-2)+b-2)\text{个}a,c\}$。只要 $a>2$ 且至少有 $3$ 个数，那么就可以变成无穷多个 $a$。
- 那么初始根本不能拆的数一定不行。初始只能拆成两个质数的一定不行（形如 $x=p^q$，其中 $p,q\in \mathbb{P}$）。剩下的情况只有只能拆成 $\{2,2,2\}$ 的不行，只有一个数 $x=16=2^4=4^2$。
- 总结起来，能表示成 $a^b(a\geq 2,b\geq 2,a\notin \mathbb{P} \operatorname{or} b\notin \mathbb{P})$ 的都可以（除了 $16$）。
- 对于 $b=2$ 的，要满足上述条件，把可以的更新到答案（注意去掉 $16$，即 $a=4$）。
- 对于 $b\geq 3$ 的，直接枚举 $a$，然后看是否上述满足条件，而且还得 $a^b$ 不能表示成 $x^2$，把满足的 $a^b$ 加入 set（去重）。最后把 set 中的数更新到答案即可。


### 移硬币（coin）

#### 题面
- 有一个 $1*10^9+1$ 的棋盘，我们将格子从左到右编号为 $0,1,\cdots,10^9$。
- 有 $n$ 个硬币，第 $i$ 个位于格子 $x_i$。Alice 和 Bob 轮流操作，每人每次需要选择一个硬币，将它向左移动正整数格，但不能跨过其它硬币，也不能和其它硬币放在一个格子上。无法操作者输。
- 此外，在格子 $0$ 有一个 zzq，当一个硬币被移动到格子 $0$ 时，zzq 会把它吃掉(也就是说之后还可以有硬币被移动过来)。
- 这个游戏还有一些变种，我们在输入中给定整数 $m$：
    - 当 $m=0$ 时，无特殊规则；
    - 当 $m>0$ 时，第 $m$ 个硬币为金币，让 zzq 吃掉金币的人直接获胜。
    - 当 $m<0$ 时，第 $-m$ 个硬币为金币，让 zzq 吃掉金币的人直接失败。
- 你需要求出谁会获胜。
- $1\leq T\leq 100,1\leq n\leq 100,|m|\leq n,0<x_1<x_2<\cdots<x_n\leq 10^9$。

#### 题解
- $m=-1$ 是基础情况，谁移到 $0$ 就输了，那么可以认为没有 $0$ 这个格子。考虑相邻两堆之间的距离，把一个往前移时会给前面的距离 $-1$，后面的距离 $+1$。相当于把第 $i$ 堆移动一些石子到 $i+1$ 堆，最后输了的情况就是全部移完，这就是一个阶梯nim，从右往左第奇数堆是有效的，异或起来即可。
- $m=0$，相当于初始最左边那堆加 $1$（可以移到 $0$，取完就代表移到 $0$），如果取完，需要给下一堆 $+1$。发现取完给下一堆 $+1$ 其实没有用，如果当前是有效堆，那么给无效堆 $+1$ 显然没效果；如果当前是无效堆，你操作无效堆后面的人一定复读，复读的时候加一个 $1$ 即可。所以只需要初始给第一堆 $+1$ 就好了。
- 而 $m=1$ 平凡，先手必胜。
- 可以发现 $k>0$ 时，$m=-k$ 与 $m=k+1$ 等价。因为要把 $k+1$ 个移到 $0$ 只能之前把第 $k$ 个移到开头。把第 $k$ 个移到开头后，另一个人有必胜策略（把 $k+1$ 直接移到 $0$），一定会直接移动。
- 现在讨论 $m<-1$，也就是前 $-m-2$ 堆移到开头后会给下一堆 $+1$（$-m-1$ 堆开始不加 $1$ 是因为之后谁移到 $0$ 谁就输了，不能用 $0$ 的位置了，之后认为没有 $0$ 这个格子），讨论起来和 $m=0$ 一样，还是可以复读，移无效堆如果到有效堆时 $+1$ 了往扔也 $+1$，否则不加，所以和 $m=0$ 一样做即可。
- 综上所述：$m=1$ 先手必胜；$m=-1$ 或 $m=2$ 就按照第一堆不 $+1$ 做；否则就按第一堆 $+1$ 做。